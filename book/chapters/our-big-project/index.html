
<html>
	<head>
		<meta charset='utf-8'>
		<title>Our big project</title>
		<link rel="stylesheet" type="text/css" href="../../assets/book.css"/>
		<link rel="stylesheet" type="text/css" href="../../assets/pygments.css"/>
	</head>
	<body>
		<article>
			<h1>Our big project</h1>
			<p>Last updated on Jan 1st, 1970</p>
			<h2><a name="our-big-project-mdash-creating-a-static-website-plugin"class="anchor" href="#our-big-project-mdash-creating-a-static-website-plugin"><span class="header-link"></span></a>Our Big Project &mdash; creating a static website plugin</h2>
<p>Let&#39;s put everything we know together to create a static website generator that takes pages in markdown format and assembles them into a fully-functional blog.</p>
<h3><a name="what-we-re-trying-to-do"class="anchor" href="#what-we-re-trying-to-do"><span class="header-link"></span></a>What we&#39;re trying to do</h3>
<p>Let&#39;s look at the structure we want for the project:</p>
<pre><code><div class="highlight"><pre><span class="nx">my</span><span class="o">-</span><span class="nx">blog</span>
    <span class="nx">init</span><span class="o">/</span>
        <span class="nx">sample</span><span class="p">.</span><span class="nx">post</span>
    <span class="nx">content</span><span class="o">/</span>
        <span class="nx">hello_world</span><span class="p">.</span><span class="nx">post</span>
        <span class="nx">second_post</span><span class="p">.</span><span class="nx">post</span>
    <span class="nx">templates</span><span class="o">/</span>
        <span class="nx">partials</span><span class="o">/</span>
            <span class="nx">header</span><span class="p">.</span><span class="nx">tmpl</span>
            <span class="nx">footer</span><span class="p">.</span><span class="nx">tmpl</span>
        <span class="nx">archive</span><span class="p">.</span><span class="nx">tmpl</span>
        <span class="nx">category</span><span class="p">.</span><span class="nx">tmpl</span>
        <span class="nx">index</span><span class="p">.</span><span class="nx">tmpl</span>
        <span class="nx">post</span><span class="p">.</span><span class="nx">tmpl</span>
    <span class="nx">styles</span><span class="o">/</span>
        <span class="nx">blog</span><span class="p">.</span><span class="nx">css</span>
    <span class="nx">scripts</span><span class="o">/</span>
        <span class="nx">blog</span><span class="p">.</span><span class="nx">js</span>
    <span class="nx">blog</span><span class="o">/</span>
        <span class="o">&lt;</span><span class="nx">our</span> <span class="nx">blog</span> <span class="nx">gets</span> <span class="nx">generated</span> <span class="nx">here</span><span class="o">&gt;</span>
    <span class="nx">Gruntfile</span><span class="p">.</span><span class="nx">js</span>
    <span class="kr">package</span><span class="p">.</span><span class="nx">json</span>
</pre></div>
</code></pre>
<p>We will need to take the information for each post from the <code>.post</code> file and build a corresponding <code>.html</code> file by assembling it from templates:</p>
<ul>
<li>templates that correspond to the different types of pages we will have: a home page, a list of all the posts, a list of posts in a specific category and pages for the individual posts;</li>
<li><code>partials</code> which are the parts common to all page types, such as the header and the footer.</li>
</ul>
<h4><a name="the-structure-of-posts"class="anchor" href="#the-structure-of-posts"><span class="header-link"></span></a>The structure of posts</h4>
<p>We want to be able to include some meta-data along with the content of our posts, so a post should look like:</p>
<pre><code><div class="highlight"><pre><span class="p">[</span><span class="nx">METADATA</span><span class="p">]</span>

<span class="nx">title</span><span class="o">:</span> <span class="nx">My</span> <span class="nx">Post</span>
<span class="nx">slug</span><span class="o">:</span> <span class="nx">my</span><span class="o">-</span><span class="nx">post</span>
<span class="nx">date</span><span class="o">:</span> <span class="nx">September</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">2013</span>
<span class="nx">category</span><span class="o">:</span> <span class="nx">General</span>

<span class="p">[</span><span class="nx">CONTENT</span><span class="p">]</span>

<span class="o">&lt;</span><span class="nx">markdown</span> <span class="nx">content</span> <span class="nx">goes</span> <span class="nx">here</span><span class="o">&gt;</span>
</pre></div>
</code></pre>
<p>Let&#39;s think about the kind of metadata is useful:</p>
<ul>
<li><code>title</code> for the title of the post;</li>
<li><code>slug</code> for the URL part leading to the post; in the example above, it would be <code>http://myawesomeblog.com/my-post</code>; in the absence of an explicit slug, we should generate it based on the post title based on some rules;</li>
<li><code>date</code> when the post was written; if ommited, we can look at the timestamp on the file itself.</li>
<li><code>category</code> of the post.</li>
</ul>
<p>We&#39;ve also created a <code>init</code> folder containing <code>sample.post</code> so we don&#39;t have to start each page from scratch. We&#39;ll create a separate Grunt task that creates new posts for us:</p>
<pre><code><div class="highlight"><pre><span class="nx">grunt</span> <span class="k">new</span> <span class="s2">&quot;Post title&quot;</span>
</pre></div>
</code></pre>
<h3><a name="let-s-gather-our-tools"class="anchor" href="#let-s-gather-our-tools"><span class="header-link"></span></a>Let&#39;s gather our tools</h3>
<p>Off the top of our heads, we will most definitely need:</p>
<ul>
<li><code>grunt-contrib-copy</code> to copy everything to the <code>blog</code> folder;</li>
<li><code>grunt-contrib-clean</code> to clean up after generating temporary files;</li>
<li><code>grunt-markdown</code> to convert the Markdown content of our posts to HTML.</li>
</ul>
<h3><a name="building-the-gruntfile"class="anchor" href="#building-the-gruntfile"><span class="header-link"></span></a>Building the Gruntfile</h3>
<pre><code><div class="highlight"><pre><span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
    <span class="nx">copy</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">sample</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">files</span><span class="o">:</span> <span class="p">[{</span>
                <span class="nx">src</span><span class="o">:</span> <span class="s1">&#39;init/sample.post&#39;</span><span class="p">,</span>
                <span class="nx">dest</span><span class="o">:</span> <span class="s1">&#39;posts/new_post.post&#39;</span>
            <span class="p">}]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="s1">&#39;Build the blog&#39;</span><span class="p">,</span> <span class="p">[]);</span>
<span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s1">&#39;new&#39;</span><span class="p">,</span> <span class="s1">&#39;Create a new post&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;copy:sample&#39;</span><span class="p">])</span>
</pre></div>
</code></pre>

		</article>
	</body>
</html>